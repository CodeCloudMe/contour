<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Example on How to User Narwhal</title>
    <link rel="stylesheet" href="../examples/css/narwhal.css">
    <script src="../examples/js/vendor/d3.js"></script>
    <script src="../examples/js/vendor/jquery.js"></script>
    <script src="../examples/js/vendor/lodash.js"></script>

    <script src="../src/scripts/core/narwhal-utils.js" ></script>
    <script src="../src/scripts/core/axis/ordinal-scale-axis.js" ></script>
    <script src="../src/scripts/core/axis/time-scale-axis.js" ></script>
    <script src="../src/scripts/core/axis/axis-scale-factory.js" ></script>
    <script src="../src/scripts/core/narwhal.js"></script>
    <script src="../src/scripts/core/connectors/csv.js" ></script>
    <script src="../src/scripts/core/cartesian.js"></script>
    <script src="../src/scripts/visualizations/line.js"></script>
    <script src="../src/scripts/visualizations/column.js"></script>

    <style>
        body {
            width: 960px;
        }
        .chart {
            border: none;
            width: 600px;
            margin: 30px;
        }

    </style>

    <style>

    body {
      font: 10px sans-serif;
    }

    </style>
</head>
<body>

    <div class="chart container3"></div>
    <div class="chart container2"></div>
    <div class="chart container"></div>

    <script>

    var seed = 1;
    function random() {
        var x = Math.sin(seed++) * 10000;
        return x - Math.floor(x);
    }

    var baseDate = new Date(2013, 10, 10);
    var timeData = [];

    for (var j=0; j<5; j++) {
        var d = new Date();
        d.setDate(baseDate.getDate() + j);
        timeData.push({ x: d, y: random() * 40 + 5});
    }

    var csvData = 'quarter,cost,revenue,profit\n2013Q1,100,150,50\n2013Q2,110,150,40\n2013Q3,90,180,90\n2013Q4,105,190,85'

    /* CHART CONFIGURATION */
    var baseConfig = {
        yAxis: {
            min: 0,
            title: 'Quantity'
        }
    }


    // var chart = new Narwhal(_.extend(baseConfig, {
    //         el: '.container',
    //         xAxis: {
    //             title: 'Sample',
    //             categories: ['one', 'two', 'three', 'four', 'five']
    //         }
    //     }))
    //     .cartesian()
    //     .line([{ data: [1,2,3,4, 3.5] }, {data: [4,3,2,1]} ])
    //     .render();

    // var chart2 = new Narwhal(_.extend(baseConfig, {
    //         el: '.container2',
    //         xAxis: {

    //             title: 'Time'

    //         }
    //     }))
    //     .cartesian()
    //     .line(timeData)
    //     .render();

    var measure = 'Profit'
    var csv = new Narwhal.connectors.Csv(csvData);

    var chart3 = new Narwhal(_.extend(baseConfig, {
                    el: '.container3',
                    chart: {
                        padding: {
                            left: 40
                        }
                    },
                    yAxis: {
                        min: 0,
                        max: 200,
                        title: measure + ' ($)'
                    },
                    xAxis: {

                        type: 'ordinal',
                        title: 'Quarter',
                        // firstAndLast: false
                        // categories: ['one', 'two', 'three', 'four', 'five']
                    }
                }))
                .cartesian()
                .column(csv.measure('revenue'))
                .line(csv.measure('cost'))
                // .column([1,2,3,4,5])
                // .line([4,2,3,1,5])
                // .column()
                .render();

    </script>
</body>

</html>
