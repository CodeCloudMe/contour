<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Example on How to User Narwhal</title>
    <link rel="stylesheet" href="../examples/css/bootstrap.min.css">
    <link rel="stylesheet" href="../examples/css/narwhal.css">

    <script src="../examples/js/vendor/d3.js"></script>
    <script src="../examples/js/vendor/jquery.js"></script>
    <script src="../examples/js/vendor/lodash.js"></script>

    <script src="../src/scripts/core/narwhal-utils.js" ></script>
    <script src="../src/scripts/core/axis/ordinal-scale-axis.js" ></script>
    <script src="../src/scripts/core/axis/time-scale-axis.js" ></script>
    <script src="../src/scripts/core/axis/linear-scale-axis.js" ></script>
    <script src="../src/scripts/core/axis/axis-scale-factory.js" ></script>
    <script src="../src/scripts/core/narwhal.js"></script>
    <script src="../src/scripts/core/cartesian.js"></script>
    <script src="../src/scripts/core/horizontal-frame.js"></script>
    <script src="../src/scripts/visualizations/line.js"></script>
    <script src="../src/scripts/visualizations/area.js"></script>
    <script src="../src/scripts/visualizations/tooltip.js"></script>
    <script src="../src/scripts/visualizations/stack-tooltip.js"></script>
    <script src="../src/scripts/visualizations/column.js"></script>
    <script src="../src/scripts/visualizations/bar.js"></script>
    <script src="../src/scripts/visualizations/pie.js"></script>
    <script src="../src/scripts/visualizations/scatter.js"></script>
    <script src="../src/scripts/connectors/csv.js" ></script>

    <style>
        .chart {
            width: 90%;
            margin: 10px 0;
        }

        .chart svg {
            border: solid 0px red;

        }


        .legend {
            height: 3.5em;
        }


    </style>

</head>
<body>

<div class="container">
    <h2>Narwhal</h2>

    <div class="legend"></div>
    <div class="chart"></div>
    <div id="res"></div>


</div>
<script>


var series = [];

var rand = function (num) {
    return Math.round(Math.random() * num);
}

var generateSeries = function (numSeries) {
    numSeries = numSeries || 1;
    var numPoints = 100;
    var series = [];
    for(var i=0, seriesData = []; i<numSeries; i++) {
        series.push({
            name: 'S' + (i+1),
            data: seriesData
        });

       for(var j=0; j<numPoints; j++) {
            seriesData.push({ x: rand(10) + 200, y: rand(100) });
        }

        seriesData = seriesData.sort(function(a,b) {
            return a.x - b.x;
        });
    }

    return series;
}



// var config = {

//     el: '.chart',

//     xAxis: {
//         firstAndLast: false,
//         categories: [1,2,3,4],
//         labels: {
//             format: '0.1f'
//         }
//     },
//     yAxis: {
//         // smartAxis: false,
//     },

// };

var config = {
    el: '.chart',
    "chart": {
        "height": 400
    },
    "yAxis": {
        "smartAxis": false,
        "firstAndLast": false,
        "title": "Cost",
        "max": 174598.2,
        "labels": {
            "format": "$.2s"
        }
    },
    "xAxis": {
        "firstAndLast": false,
        "smartAxis": false,
        "title": "Runs",
        "categories": [1, 2, 3, 4, 5, 6]
    },
    "bar": {
        "stacked": true
    }
}

// var data = [
//     { x: 1, y: 10 },
//     { x: 2, y: 20 },
//     { x: 3, y: 30 },
//     { x: 4, y: 40 },
// ]
var data = [{
    "name": "Labor Training Investment",
    "data": [9500, 9500, 9500, 9500, 9500, 9500]
}, {
    "name": "Equipment Investment",
    "data": [0, 4000, 4000, 4000, 4000, 4000]
}, {
    "name": "Supplier Cost",
    "data": [0, 0, 0, 62500, 62500, 62500]
}, {
    "name": "QA Sampling Rate",
    "data": [1, 1, 1.5, 1.5, 1, 1.5]
}, {
    "name": "Defects Found (QA)",
    "data": [1120, 1088, 3104, 2336, 864, 2688]
}, {
    "name": "Machine Recalibration",
    "data": [0, 0, 0, 0, 0, 0]
}, {
    "name": "Labor Changes",
    "data": [0, 0, 0, 0, 0, 0]
}, {
    "name": "Defects Found (Consumers)",
    "data": [117495, 108405, 104670, 87840, 87975, 86940]
}, {
    "name": "Extraordinary Failure Cost",
    "data": [0, 0, 0, 0, 0, 0]
}];

var chart = new Narwhal(config)
    .cartesian()
    .horizontal()
    .bar(data)
    // .area(generateSeries(3))
    // .pie([{ x: 'Alpha', y: 10}, { x: 'Beta', y: 30}, {x: 'Gamma', y: 40}, {x: 'Kappa', y: 20}])
    .stackTooltip(data, {el:'.legend'})
    .render();






</script>
</body>
</html>
