{"version":3,"file":"dist/narwhal.min.js","sources":["dist/narwhal.js"],"names":["ns","d3","_","$","undefined","Narwhal","options","this","init","defaults","chart","animations","defaultWidth","defaultAspect","width","height","margin","top","right","bottom","left","padding","tooltip","export","ctorName","renderer","normalizeSeries","data","length","map","bind","series","index","name","datum","sortSeries","each","shouldSort","isObject","isDate","x","sortFunc","a","b","sort","Error","prototype","opt","extend","renderFunc","isArray","datums","call","partial","visualizations","push","utils","textBounds","text","css","body","document","getElementsByTagName","wrapper","createElement","dummy","className","style","position","innerHTML","appendChild","res","clientWidth","clientHeight","removeChild","calculateWidth","parseInt","el","calculateHeight","containerHeight","calcWidth","ratio","aspect","Math","round","calcMetrics","plotWidth","plotHeight","composeOptions","baseRender","plotArea","render","renderVisualizations","chartOpt","container","select","svg","append","attr","createVisualizationLayer","id","visualization","layer","expose","functionality","ctorObj","ctor","omit","compose","window","jQuery","extractScaleDomain","domain","min","max","dataMax","dataMin","xAxis","rangePadding","innerTickSize","outerTickSize","tickPadding","titlePadding","firstAndLast","labels","yAxis","smartAxis","align","format","cartesian","dataSrc","title","titleOneEm","computeXScale","xDomain","scaleGenerator","nw","xScaleFactory","xScale","scale","rangeBand","computeYScale","yDomain","yScaleDomain","yScale","linear","range","nice","computeScales","adjustDomain","y","axis","orient","_xAxisGroup","postProcessAxis","alignmentOffset","middle","tickValues","_extractYTickValues","numTicks","_numYTicks","tickFormat","tickSize","ticks","_yAxisGroup","selectAll","axisLabels","lineHeightAdjustment","d","categories","Array","extractXDomain","extractYDomain","yMax","getYAxisDataMax","yMin","getYAxisDataMin","set","pluck","niceRound","smartAxisValues","adjustedDomain","merge","regularAxisYTicks","smartAxisYTicks","helpers","isTimeData","type","TimeScale","OrdinalScale","isCategorized","_scale","_domain","ordinal","getDate","rangeRoundBands","rangePoints","dateDiff","d1","d2","diff","getTime","time","extent","getOptimalTickFormat","maxTicks","customValues","len","step","j","ceil","axisGroup","formatter","spanDays","daysThreshold","rangeRound","numberHelpers","ar","roundToNearest","number","multiple","val","arrayHelpers","array1","array2","concat","h","colWidth","col","enter","delay","transition","i","duration","appendPath","seriesName","seriesIndex","pathTween","_data","interpolate","quantile","t","line","slice","markerSize","marker","size","trackerSize","join","path","attrTween","enable","normalizeData","clearHideTimer","clearTimeout","hideTimer","changeOpacity","opacity","animate","tooltipElement","positionTooltip","ev","pageX","pageY","onMouseOver","event","pos","show","onMouseOut","hideTime","getTooltipText","console","log","html","visibleOpacity","showTime","on","Csv","raw","headerRow","parse","_dimension","_headers","rows","split","shift","toLowerCase","r","dimension","arguments","indexOf","measure","dimIndex","measureIndex","result","isNaN","connectors"],"mappings":"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"}