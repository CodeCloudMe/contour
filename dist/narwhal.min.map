{"version":3,"file":"dist/narwhal.min.js","sources":["dist/narwhal.js"],"names":["ns","d3","_","$","undefined","Narwhal","options","this","init","defaults","chart","animations","defaultWidth","defaultAspect","width","height","margin","top","right","bottom","left","padding","export","ctorName","renderer","Error","prototype","data","opt","extend","datums","map","bind","datum","visualizations","push","partial","utils","textBounds","text","css","body","document","getElementsByTagName","wrapper","createElement","dummy","className","style","position","innerHTML","appendChild","res","clientWidth","clientHeight","remove","calculateWidth","parseInt","el","calculateHeight","containerHeight","calcWidth","ratio","aspect","Math","round","calcMetrics","plotWidth","plotHeight","composeOptions","baseRender","plotArea","render","renderVisualizations","chartOpt","container","select","svg","append","attr","createVisualizationLayer","id","each","visualization","index","layer","call","expose","functionality","ctorObj","ctor","omit","compose","window","jQuery","merge","array1","array2","length","concat","sort","a","b","niceRound","val","ceil","extractScaleDomain","domain","min","max","dataMax","dataMin","xAxis","rangePadding","innerTickSize","outerTickSize","tickPadding","titlePadding","firstAndLast","yAxis","labels","format","cartesian","dataSrc","title","titleOneEm","computeXScale","xDomain","scaleGenerator","nw","xScaleFactory","xScale","scale","rangeBand","computeYScale","yDomain","yScaleDomain","yScale","linear","range","computeScales","adjustDomain","y","axis","orient","_xAxisGroup","postProcessAxis","tickValues","_extractTickValues","tickFormat","tickSize","_yAxisGroup","selectAll","axisLabels","lineHeightAdjustment","d","isObject","x","categories","series","Array","extractXDomain","extractYDomain","yMax","getYAxisDataMax","yMin","getYAxisDataMin","set","pluck","adjustedDomain","helpers","isTimeData","isArray","isDate","type","TimeScale","OrdinalScale","isCategorized","_scale","_domain","ordinal","getDate","rangeRoundBands","rangePoints","time","extent","getOptimalTickFormat","axisGroup","getOptimalTicks","days","rangeRound","extractDomain","ar","h","colWidth","col","enter","delay","transition","i","duration","appendPath","seriesName","seriesIndex","pathTween","_data","interpolate","quantile","t","line","slice","markerSize","marker","size","replace","path","attrTween","enable","normalizeData","name","Csv","raw","headerRow","parse","_dimension","_headers","rows","split","shift","toLowerCase","r","dimension","arguments","indexOf","measure","dimIndex","measureIndex","result","isNaN","connectors"],"mappings":"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"}