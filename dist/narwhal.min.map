{"version":3,"file":"dist/narwhal.min.js","sources":["dist/narwhal.js"],"names":["ns","d3","_","$","undefined","Narwhal","options","this","init","defaults","chart","animations","defaultWidth","defaultAspect","width","height","margin","top","right","bottom","left","padding","tooltip","expose","ctorName","functionality","ctor","extend","omit","call","prototype","export","renderer","normalizeSeries","data","length","map","bind","series","index","name","datum","sortSeries","each","shouldSort","isObject","isDate","x","sortFunc","a","b","sort","Error","opt","renderFunc","isArray","datums","partial","visualizations","push","utils","textBounds","text","css","body","document","getElementsByTagName","wrapper","createElement","dummy","className","style","position","innerHTML","appendChild","res","clientWidth","clientHeight","removeChild","calculateWidth","parseInt","el","calculateHeight","containerHeight","calcWidth","ratio","aspect","Math","round","calcMetrics","plotWidth","plotHeight","composeOptions","baseRender","plotArea","render","renderVisualizations","chartOpt","container","select","svg","append","attr","createVisualizationLayer","id","visualization","layer","compose","d","window","jQuery","extractScaleDomain","domain","min","max","dataMax","dataMin","xAxis","rangePadding","innerTickSize","outerTickSize","tickPadding","titlePadding","firstAndLast","labels","yAxis","smartAxis","align","format","cartesian","dataSrc","title","titleOneEm","computeXScale","xDomain","scaleGenerator","nw","xScaleFactory","xScale","scale","rangeBand","computeYScale","yDomain","yScaleDomain","yScale","linear","range","nice","computeScales","adjustDomain","y","axis","orient","_xAxisGroup","postProcessAxis","alignmentOffset","middle","tickValues","_extractYTickValues","numTicks","_numYTicks","tickFormat","tickSize","ticks","_yAxisGroup","selectAll","axisLabels","lineHeightAdjustment","categories","Array","extractXDomain","extractYDomain","yMax","getYAxisDataMax","yMin","getYAxisDataMin","set","pluck","niceRound","smartAxisValues","adjustedDomain","merge","regularAxisYTicks","smartAxisYTicks","helpers","isTimeData","type","TimeScale","OrdinalScale","isCategorized","_scale","_domain","ordinal","getDate","rangeRoundBands","rangePoints","dateDiff","d1","d2","diff","getTime","axisDomain","_getAxisDomain","time","getOptimalTickFormat","maxTicks","customValues","len","step","j","ceil","axisGroup","formatter","spanDays","daysThreshold","_getAxisRange","rangeRound","linearDomain","extent","concat","numberHelpers","ar","roundToNearest","number","multiple","val","dateHelpers","arrayHelpers","array1","array2","values","barWidth","w","h","rangeBands","bar","enter","colWidth","col","delay","transition","i","duration","appendPath","seriesName","seriesIndex","renderAnimatedPath","path","line","attrTween","pathTween","renderSimplePath","renderLineMarkers","nonNullData","markerSize","renderTooltipTrackers","trackerSize","_data","interpolate","quantile","t","slice","filter","marker","size","join","renderPath","renderMakers","enable","noop","normalizeData","clearHideTimer","clearTimeout","hideTimer","changeOpacity","opacity","animate","tooltipElement","positionTooltip","ev","pageX","pageY","onMouseOver","event","pos","show","onMouseOut","hideTime","getTooltipText","html","visibleOpacity","showTime","on","Csv","raw","headerRow","parse","_dimension","_headers","rows","split","shift","toLowerCase","r","dimension","arguments","indexOf","measure","dimIndex","measureIndex","result","isNaN","connectors"],"mappings":"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"}